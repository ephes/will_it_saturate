---

title: Export


keywords: fastai
sidebar: home_sidebar



nb_path: "71_sqlite_repository.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 71_sqlite_repository.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> nb_black
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="10c733d6-0034-4722-9d80-afa3a4ff7c1e"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#10c733d6-0034-4722-9d80-afa3a4ff7c1e');

            setTimeout(function() {
                var nbb_cell_id = 1;
                var nbb_unformatted_code = "%load_ext nb_black";
                var nbb_formatted_code = "%load_ext nb_black";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">will_it_saturate.repositories</span> <span class="kn">import</span> <span class="n">BaseRepository</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="90145679-33be-4184-bdfb-bb313bb7b582"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#90145679-33be-4184-bdfb-bb313bb7b582');

            setTimeout(function() {
                var nbb_cell_id = 3;
                var nbb_unformatted_code = "from will_it_saturate.repositories import BaseRepository";
                var nbb_formatted_code = "from will_it_saturate.repositories import BaseRepository";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="dict_factory" class="doc_header"><code>dict_factory</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/repositories.py#L40" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>dict_factory</code>(<strong><code>cursor</code></strong>, <strong><code>row</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="SqliteRepository" class="doc_header"><code>class</code> <code>SqliteRepository</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/repositories.py#L47" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>SqliteRepository</code>(<strong><code>session</code></strong>:<code>Any</code>=<em><code>None</code></em>, <strong><code>connection</code></strong>:<code>Connection</code>, <strong><code>tables</code></strong>:<code>dict</code>=<em><code>{}</code></em>) :: <a href="/will_it_saturate/repositories.html#BaseRepository"><code>BaseRepository</code></a></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="BaseTable" class="doc_header"><code>class</code> <code>BaseTable</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/repositories.py#L66" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>BaseTable</code>(<strong>*<code>args</code></strong>, <strong><code>repository</code></strong>:<a href="/will_it_saturate/repositories.html#BaseRepository"><code>BaseRepository</code></a>) :: <code>BaseModel</code></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="HostTable" class="doc_header"><code>class</code> <code>HostTable</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/repositories.py#L93" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>HostTable</code>(<strong>*<code>args</code></strong>, <strong><code>repository</code></strong>:<a href="/will_it_saturate/repositories.html#BaseRepository"><code>BaseRepository</code></a>, <strong><code>table_name</code></strong>:<code>str</code>=<em><code>'host'</code></em>, <strong><code>create_statement</code></strong>:<code>str</code>=<em><code>"\n        create table host (\n            host_id INTEGER PRIMARY KEY,\n            created DATE DEFAULT (datetime('now','localtime')),\n            machine_id TEXT NOT NULL UNIQUE,\n            details TEXT NOT NULL\n        )\n    "</code></em>) :: <a href="/will_it_saturate/sqlite_repository.html#BaseTable"><code>BaseTable</code></a></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Tests-HostTable">Tests HostTable<a class="anchor-link" href="#Tests-HostTable"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">repository</span> <span class="o">=</span> <span class="n">SqliteRepository</span><span class="o">.</span><span class="n">build_repository</span><span class="p">(</span><span class="s2">&quot;:memory:&quot;</span><span class="p">)</span>
<span class="n">host_table</span> <span class="o">=</span> <span class="n">HostTable</span><span class="p">(</span><span class="n">repository</span><span class="o">=</span><span class="n">repository</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">host_table</span><span class="o">.</span><span class="n">create_table</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="b66390c8-5bf3-4bb5-9f71-8d149dc12e77"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#b66390c8-5bf3-4bb5-9f71-8d149dc12e77');

            setTimeout(function() {
                var nbb_cell_id = 6;
                var nbb_unformatted_code = "repository = SqliteRepository.build_repository(\":memory:\")\nhost_table = HostTable(repository=repository)\n_ = host_table.create_table()";
                var nbb_formatted_code = "repository = SqliteRepository.build_repository(\":memory:\")\nhost_table = HostTable(repository=repository)\n_ = host_table.create_table()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Get-Machine-to-Host-Lookup">Get Machine to Host Lookup<a class="anchor-link" href="#Get-Machine-to-Host-Lookup"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">machine_to_host_id</span> <span class="o">=</span> <span class="n">host_table</span><span class="o">.</span><span class="n">get_machine_to_host_id</span><span class="p">([</span><span class="s2">&quot;asdf&quot;</span><span class="p">])</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">machine_to_host_id</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="aad14269-3444-4d9d-9f78-c3023c1426b5"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#aad14269-3444-4d9d-9f78-c3023c1426b5');

            setTimeout(function() {
                var nbb_cell_id = 7;
                var nbb_unformatted_code = "machine_to_host_id = host_table.get_machine_to_host_id([\"asdf\"])\nassert len(machine_to_host_id) == 0";
                var nbb_formatted_code = "machine_to_host_id = host_table.get_machine_to_host_id([\"asdf\"])\nassert len(machine_to_host_id) == 0";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Insert-HostDetails">Insert HostDetails<a class="anchor-link" href="#Insert-HostDetails"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">machine_id1</span><span class="p">,</span> <span class="n">cpuinfo</span> <span class="o">=</span> <span class="s2">&quot;asdf&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;arch&quot;</span><span class="p">:</span> <span class="s2">&quot;X86_64&quot;</span><span class="p">}</span>
<span class="n">host_details</span> <span class="o">=</span> <span class="n">HostDetails</span><span class="p">(</span><span class="n">machine_id</span><span class="o">=</span><span class="n">machine_id1</span><span class="p">,</span> <span class="n">cpuinfo</span><span class="o">=</span><span class="n">cpuinfo</span><span class="p">)</span>

<span class="n">rowcount</span> <span class="o">=</span> <span class="n">host_table</span><span class="o">.</span><span class="n">insert_host_details</span><span class="p">(</span><span class="n">host_details</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">rowcount</span> <span class="o">==</span> <span class="mi">1</span>

<span class="n">machine_to_host_id</span> <span class="o">=</span> <span class="n">host_table</span><span class="o">.</span><span class="n">get_machine_to_host_id</span><span class="p">([</span><span class="n">machine_id1</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">machine_to_host_id</span> <span class="o">==</span> <span class="p">{</span><span class="n">machine_id1</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="0381dd50-1f95-4732-a024-ad24261b7511"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#0381dd50-1f95-4732-a024-ad24261b7511');

            setTimeout(function() {
                var nbb_cell_id = 8;
                var nbb_unformatted_code = "machine_id1, cpuinfo = \"asdf\", {\"arch\": \"X86_64\"}\nhost_details = HostDetails(machine_id=machine_id1, cpuinfo=cpuinfo)\n\nrowcount = host_table.insert_host_details(host_details)\nassert rowcount == 1\n\nmachine_to_host_id = host_table.get_machine_to_host_id([machine_id1])\nassert machine_to_host_id == {machine_id1: 1}";
                var nbb_formatted_code = "machine_id1, cpuinfo = \"asdf\", {\"arch\": \"X86_64\"}\nhost_details = HostDetails(machine_id=machine_id1, cpuinfo=cpuinfo)\n\nrowcount = host_table.insert_host_details(host_details)\nassert rowcount == 1\n\nmachine_to_host_id = host_table.get_machine_to_host_id([machine_id1])\nassert machine_to_host_id == {machine_id1: 1}";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Insert-two-HostDetails-with-one-Already-Existing">Insert two HostDetails with one Already Existing<a class="anchor-link" href="#Insert-two-HostDetails-with-one-Already-Existing"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">machine_id2</span> <span class="o">=</span> <span class="s2">&quot;bsdf&quot;</span>
<span class="n">host_detail</span> <span class="o">=</span> <span class="n">HostDetails</span><span class="p">(</span><span class="n">machine_id</span><span class="o">=</span><span class="n">machine_id2</span><span class="p">,</span> <span class="n">cpuinfo</span><span class="o">=</span><span class="n">cpuinfo</span><span class="p">)</span>

<span class="n">rowcount</span> <span class="o">=</span> <span class="n">host_table</span><span class="o">.</span><span class="n">insert_host_details</span><span class="p">(</span><span class="n">host_detail</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">rowcount</span> <span class="o">==</span> <span class="mi">1</span>

<span class="n">machine_to_host_id</span> <span class="o">=</span> <span class="n">host_table</span><span class="o">.</span><span class="n">get_machine_to_host_id</span><span class="p">(</span>
    <span class="p">[</span><span class="n">machine_id1</span><span class="p">,</span> <span class="n">machine_id2</span><span class="p">,</span> <span class="s2">&quot;csdf&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="n">machine_to_host_id</span> <span class="o">==</span> <span class="p">{</span><span class="n">machine_id1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">machine_id2</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="796b7593-87f3-45d0-8d87-be0fcf73b031"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#796b7593-87f3-45d0-8d87-be0fcf73b031');

            setTimeout(function() {
                var nbb_cell_id = 9;
                var nbb_unformatted_code = "machine_id2 = \"bsdf\"\nhost_detail = HostDetails(machine_id=machine_id2, cpuinfo=cpuinfo)\n\nrowcount = host_table.insert_host_details(host_detail)\nassert rowcount == 1\n\nmachine_to_host_id = host_table.get_machine_to_host_id(\n    [machine_id1, machine_id2, \"csdf\"]\n)\nassert machine_to_host_id == {machine_id1: 1, machine_id2: 2}";
                var nbb_formatted_code = "machine_id2 = \"bsdf\"\nhost_detail = HostDetails(machine_id=machine_id2, cpuinfo=cpuinfo)\n\nrowcount = host_table.insert_host_details(host_detail)\nassert rowcount == 1\n\nmachine_to_host_id = host_table.get_machine_to_host_id(\n    [machine_id1, machine_id2, \"csdf\"]\n)\nassert machine_to_host_id == {machine_id1: 1, machine_id2: 2}";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Add-all-Hosts-Needed-for-Result-(get_or_create_hosts_from_result)">Add all Hosts Needed for Result (get_or_create_hosts_from_result)<a class="anchor-link" href="#Add-all-Hosts-Needed-for-Result-(get_or_create_hosts_from_result)"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">will_it_saturate.results</span> <span class="kn">import</span> <span class="n">Result</span>

<span class="n">dummy_result_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;server&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;server&quot;</span><span class="p">},</span>
    <span class="s2">&quot;client&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;client&quot;</span><span class="p">},</span>
    <span class="s2">&quot;file_size&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;complete_size&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">**</span><span class="n">dummy_result_data</span><span class="p">,</span>
    <span class="s2">&quot;server_details&quot;</span><span class="p">:</span> <span class="n">HostDetails</span><span class="p">(</span><span class="n">machine_id</span><span class="o">=</span><span class="s2">&quot;dsdf&quot;</span><span class="p">,</span> <span class="n">cpuinfo</span><span class="o">=</span><span class="p">{}),</span>
    <span class="s2">&quot;client_details&quot;</span><span class="p">:</span> <span class="n">HostDetails</span><span class="p">(</span><span class="n">machine_id</span><span class="o">=</span><span class="s2">&quot;esdf&quot;</span><span class="p">,</span> <span class="n">cpuinfo</span><span class="o">=</span><span class="p">{}),</span>
<span class="p">}</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">Result</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="n">machine_to_host_id</span> <span class="o">=</span> <span class="n">host_table</span><span class="o">.</span><span class="n">get_or_create_hosts_from_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">machine_to_host_id</span> <span class="o">==</span> <span class="p">{</span>
    <span class="n">result</span><span class="o">.</span><span class="n">server_details</span><span class="o">.</span><span class="n">machine_id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">result</span><span class="o">.</span><span class="n">client_details</span><span class="o">.</span><span class="n">machine_id</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="e695d0b2-d5d9-4c92-93b8-ff601c1b95a8"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#e695d0b2-d5d9-4c92-93b8-ff601c1b95a8');

            setTimeout(function() {
                var nbb_cell_id = 10;
                var nbb_unformatted_code = "from will_it_saturate.results import Result\n\ndummy_result_data = {\n    \"server\": {\"name\": \"server\"},\n    \"client\": {\"name\": \"client\"},\n    \"file_size\": 10,\n    \"complete_size\": 100,\n}\n\nkwargs = {\n    **dummy_result_data,\n    \"server_details\": HostDetails(machine_id=\"dsdf\", cpuinfo={}),\n    \"client_details\": HostDetails(machine_id=\"esdf\", cpuinfo={}),\n}\nresult = Result(**kwargs)\nmachine_to_host_id = host_table.get_or_create_hosts_from_result(result)\nassert machine_to_host_id == {\n    result.server_details.machine_id: 3,\n    result.client_details.machine_id: 4,\n}";
                var nbb_formatted_code = "from will_it_saturate.results import Result\n\ndummy_result_data = {\n    \"server\": {\"name\": \"server\"},\n    \"client\": {\"name\": \"client\"},\n    \"file_size\": 10,\n    \"complete_size\": 100,\n}\n\nkwargs = {\n    **dummy_result_data,\n    \"server_details\": HostDetails(machine_id=\"dsdf\", cpuinfo={}),\n    \"client_details\": HostDetails(machine_id=\"esdf\", cpuinfo={}),\n}\nresult = Result(**kwargs)\nmachine_to_host_id = host_table.get_or_create_hosts_from_result(result)\nassert machine_to_host_id == {\n    result.server_details.machine_id: 3,\n    result.client_details.machine_id: 4,\n}";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Fetch-HostDetails-by-host_id">Fetch HostDetails by host_id<a class="anchor-link" href="#Fetch-HostDetails-by-host_id"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">(</span>
    <span class="p">{}</span>
    <span class="o">==</span> <span class="n">host_table</span><span class="o">.</span><span class="n">get_host_id_to_host_details</span><span class="p">([])</span>
    <span class="o">==</span> <span class="n">host_table</span><span class="o">.</span><span class="n">get_host_id_to_host_details</span><span class="p">([</span><span class="mi">1337</span><span class="p">])</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="6c5242c4-ef66-4a7f-93f4-85b3b38f3aaf"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#6c5242c4-ef66-4a7f-93f4-85b3b38f3aaf');

            setTimeout(function() {
                var nbb_cell_id = 11;
                var nbb_unformatted_code = "assert (\n    {}\n    == host_table.get_host_id_to_host_details([])\n    == host_table.get_host_id_to_host_details([1337])\n)";
                var nbb_formatted_code = "assert (\n    {}\n    == host_table.get_host_id_to_host_details([])\n    == host_table.get_host_id_to_host_details([1337])\n)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">existing_host_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">machine_to_host_id</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">host_id_to_host_details</span> <span class="o">=</span> <span class="n">host_table</span><span class="o">.</span><span class="n">get_host_id_to_host_details</span><span class="p">(</span><span class="n">existing_host_ids</span><span class="p">)</span>
<span class="k">for</span> <span class="n">machine_id</span><span class="p">,</span> <span class="n">host_id</span> <span class="ow">in</span> <span class="n">machine_to_host_id</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">machine_id</span> <span class="o">==</span> <span class="n">host_id_to_host_details</span><span class="p">[</span><span class="n">host_id</span><span class="p">]</span><span class="o">.</span><span class="n">machine_id</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="6612ddae-3fea-446f-8835-66856b593b1f"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#6612ddae-3fea-446f-8835-66856b593b1f');

            setTimeout(function() {
                var nbb_cell_id = 12;
                var nbb_unformatted_code = "existing_host_ids = list(machine_to_host_id.values())\nhost_id_to_host_details = host_table.get_host_id_to_host_details(existing_host_ids)\nfor machine_id, host_id in machine_to_host_id.items():\n    assert machine_id == host_id_to_host_details[host_id].machine_id";
                var nbb_formatted_code = "existing_host_ids = list(machine_to_host_id.values())\nhost_id_to_host_details = host_table.get_host_id_to_host_details(existing_host_ids)\nfor machine_id, host_id in machine_to_host_id.items():\n    assert machine_id == host_id_to_host_details[host_id].machine_id";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ClientServerBase" class="doc_header"><code>class</code> <code>ClientServerBase</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/repositories.py#L171" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ClientServerBase</code>(<strong>*<code>args</code></strong>, <strong><code>repository</code></strong>:<a href="/will_it_saturate/repositories.html#BaseRepository"><code>BaseRepository</code></a>) :: <a href="/will_it_saturate/sqlite_repository.html#BaseTable"><code>BaseTable</code></a></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ServerTable" class="doc_header"><code>class</code> <code>ServerTable</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/repositories.py#L237" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ServerTable</code>(<strong>*<code>args</code></strong>, <strong><code>repository</code></strong>:<a href="/will_it_saturate/repositories.html#BaseRepository"><code>BaseRepository</code></a>, <strong><code>table_name</code></strong>:<code>str</code>=<em><code>'server'</code></em>) :: <a href="/will_it_saturate/sqlite_repository.html#ClientServerBase"><code>ClientServerBase</code></a></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ClientTable" class="doc_header"><code>class</code> <code>ClientTable</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/repositories.py#L247" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ClientTable</code>(<strong>*<code>args</code></strong>, <strong><code>repository</code></strong>:<a href="/will_it_saturate/repositories.html#BaseRepository"><code>BaseRepository</code></a>, <strong><code>table_name</code></strong>:<code>str</code>=<em><code>'client'</code></em>) :: <a href="/will_it_saturate/sqlite_repository.html#ClientServerBase"><code>ClientServerBase</code></a></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Tests-ServerTable">Tests ServerTable<a class="anchor-link" href="#Tests-ServerTable"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">repository</span> <span class="o">=</span> <span class="n">SqliteRepository</span><span class="o">.</span><span class="n">build_repository</span><span class="p">(</span><span class="s2">&quot;:memory:&quot;</span><span class="p">)</span>
<span class="n">server_table</span> <span class="o">=</span> <span class="n">ServerTable</span><span class="p">(</span><span class="n">repository</span><span class="o">=</span><span class="n">repository</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">server_table</span><span class="o">.</span><span class="n">create_table</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="430889c9-3a2c-4233-a8a4-04c7e94b278c"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#430889c9-3a2c-4233-a8a4-04c7e94b278c');

            setTimeout(function() {
                var nbb_cell_id = 14;
                var nbb_unformatted_code = "repository = SqliteRepository.build_repository(\":memory:\")\nserver_table = ServerTable(repository=repository)\n_ = server_table.create_table()";
                var nbb_formatted_code = "repository = SqliteRepository.build_repository(\":memory:\")\nserver_table = ServerTable(repository=repository)\n_ = server_table.create_table()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Get-id-to-Object-Lookup">Get id to Object Lookup<a class="anchor-link" href="#Get-id-to-Object-Lookup"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">id_to_model</span> <span class="o">=</span> <span class="n">server_table</span><span class="o">.</span><span class="n">get_id_to_model</span><span class="p">()</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">id_to_model</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="839240b0-9f7a-4aa3-a61a-c1aa570d31f2"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#839240b0-9f7a-4aa3-a61a-c1aa570d31f2');

            setTimeout(function() {
                var nbb_cell_id = 15;
                var nbb_unformatted_code = "id_to_model = server_table.get_id_to_model()\nassert len(id_to_model) == 0";
                var nbb_formatted_code = "id_to_model = server_table.get_id_to_model()\nassert len(id_to_model) == 0";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Insert-ServerDetail">Insert ServerDetail<a class="anchor-link" href="#Insert-ServerDetail"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">server</span> <span class="o">=</span> <span class="n">BaseServer</span><span class="p">()</span>
<span class="n">last_rowid</span> <span class="o">=</span> <span class="n">server_table</span><span class="o">.</span><span class="n">insert_model</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">last_rowid</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="240934a9-0a06-47c7-8814-552b40ac1ef3"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#240934a9-0a06-47c7-8814-552b40ac1ef3');

            setTimeout(function() {
                var nbb_cell_id = 16;
                var nbb_unformatted_code = "server = BaseServer()\nlast_rowid = server_table.insert_model(server)\nassert last_rowid == 1";
                var nbb_formatted_code = "server = BaseServer()\nlast_rowid = server_table.insert_model(server)\nassert last_rowid == 1";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">id_to_model</span> <span class="o">=</span> <span class="n">server_table</span><span class="o">.</span><span class="n">get_id_to_model</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">id_to_model</span> <span class="o">==</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">server</span><span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="486a0e97-0254-4c5d-8577-f0ae2b6a40d7"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#486a0e97-0254-4c5d-8577-f0ae2b6a40d7');

            setTimeout(function() {
                var nbb_cell_id = 17;
                var nbb_unformatted_code = "id_to_model = server_table.get_id_to_model()\nassert id_to_model == {1: server}";
                var nbb_formatted_code = "id_to_model = server_table.get_id_to_model()\nassert id_to_model == {1: server}";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Get-or-Create">Get or Create<a class="anchor-link" href="#Get-or-Create"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">server_id</span><span class="p">,</span> <span class="n">server</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">id_to_model</span><span class="o">.</span><span class="n">items</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">server_id</span> <span class="o">==</span> <span class="n">server_table</span><span class="o">.</span><span class="n">get_or_create_id</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="48a67ea2-a4b2-4736-acd0-45949fcfe47b"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#48a67ea2-a4b2-4736-acd0-45949fcfe47b');

            setTimeout(function() {
                var nbb_cell_id = 18;
                var nbb_unformatted_code = "server_id, server = list(id_to_model.items())[0]\nassert server_id == server_table.get_or_create_id(server)";
                var nbb_formatted_code = "server_id, server = list(id_to_model.items())[0]\nassert server_id == server_table.get_or_create_id(server)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">different_server</span> <span class="o">=</span> <span class="n">BaseServer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;different server&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">server_id</span> <span class="o">!=</span> <span class="n">server_table</span><span class="o">.</span><span class="n">get_or_create_id</span><span class="p">(</span><span class="n">different_server</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="c1009581-8200-4635-b3ff-98abd6265efb"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#c1009581-8200-4635-b3ff-98abd6265efb');

            setTimeout(function() {
                var nbb_cell_id = 19;
                var nbb_unformatted_code = "different_server = BaseServer(name=\"different server\")\nassert server_id != server_table.get_or_create_id(different_server)";
                var nbb_formatted_code = "different_server = BaseServer(name=\"different server\")\nassert server_id != server_table.get_or_create_id(different_server)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ResultTable" class="doc_header"><code>class</code> <code>ResultTable</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/repositories.py#L258" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ResultTable</code>(<strong>*<code>args</code></strong>, <strong><code>repository</code></strong>:<a href="/will_it_saturate/repositories.html#BaseRepository"><code>BaseRepository</code></a>, <strong><code>table_name</code></strong>:<code>str</code>=<em><code>'result'</code></em>, <strong><code>create_statement</code></strong>:<code>str</code>=<em><code>"\n        create table result (\n            result_id INTEGER PRIMARY KEY,\n            server_host_id integer not NULL,\n            client_host_id integer not NULL,\n            created DATE DEFAULT (datetime('now','localtime')),\n            server_id integer not NULL,\n            client_id integer not NULL,\n            file_size integer not NULL,\n            complete_size integer not NULL,\n            elapsed real not NULL,\n            FOREIGN KEY(server_host_id) REFERENCES host(host_id)\n            FOREIGN KEY(client_host_id) REFERENCES host(host_id)\n            FOREIGN KEY(server_id) REFERENCES server(server_id)\n            FOREIGN KEY(client_id) REFERENCES client(client_id)\n        )\n    "</code></em>) :: <a href="/will_it_saturate/sqlite_repository.html#BaseTable"><code>BaseTable</code></a></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="register_default_tables" class="doc_header"><code>register_default_tables</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/repositories.py#L362" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>register_default_tables</code>(<strong><code>repository</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Usage">Usage<a class="anchor-link" href="#Usage"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">repository</span> <span class="o">=</span> <span class="n">SqliteRepository</span><span class="o">.</span><span class="n">build_repository</span><span class="p">(</span><span class="s2">&quot;:memory:&quot;</span><span class="p">)</span>
<span class="n">register_default_tables</span><span class="p">(</span><span class="n">repository</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="d33e16c5-87cd-4a32-b20f-8f8b31a828ef"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#d33e16c5-87cd-4a32-b20f-8f8b31a828ef');

            setTimeout(function() {
                var nbb_cell_id = 21;
                var nbb_unformatted_code = "# dont_test\n\nrepository = SqliteRepository.build_repository(\":memory:\")\nregister_default_tables(repository)\nresults = repository.tables[\"result\"]";
                var nbb_formatted_code = "# dont_test\n\nrepository = SqliteRepository.build_repository(\":memory:\")\nregister_default_tables(repository)\nresults = repository.tables[\"result\"]";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">server</span> <span class="o">=</span> <span class="n">BaseServer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;server&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">BaseClient</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;fake client&quot;</span><span class="p">)</span>
<span class="n">server_details</span> <span class="o">=</span> <span class="n">HostDetails</span><span class="p">(</span><span class="n">machine_id</span><span class="o">=</span><span class="s2">&quot;server_1&quot;</span><span class="p">,</span> <span class="n">cpuinfo</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">})</span>
<span class="n">client_details</span> <span class="o">=</span> <span class="n">HostDetails</span><span class="p">(</span><span class="n">machine_id</span><span class="o">=</span><span class="s2">&quot;client_1&quot;</span><span class="p">,</span> <span class="n">cpuinfo</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;bar&quot;</span><span class="p">:</span> <span class="s2">&quot;baz&quot;</span><span class="p">})</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">Result</span><span class="p">(</span>
    <span class="n">server</span><span class="o">=</span><span class="n">server</span><span class="p">,</span>
    <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
    <span class="n">server_details</span><span class="o">=</span><span class="n">server_details</span><span class="p">,</span>
    <span class="n">client_details</span><span class="o">=</span><span class="n">client_details</span><span class="p">,</span>
    <span class="n">file_size</span><span class="o">=</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">complete_size</span><span class="o">=</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">8</span><span class="p">,</span>
    <span class="n">elapsed</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">add_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result_id</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>1
</pre>
</div>
</div>

<div class="output_area">




<div id="a5ade4ca-68a0-489d-8281-a184dec33939"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#a5ade4ca-68a0-489d-8281-a184dec33939');

            setTimeout(function() {
                var nbb_cell_id = 22;
                var nbb_unformatted_code = "# dont_test\n\nserver = BaseServer(name=\"server\", host=\"127.0.0.1\", port=8000)\nclient = BaseClient(name=\"fake client\")\nserver_details = HostDetails(machine_id=\"server_1\", cpuinfo={\"foo\": \"bar\"})\nclient_details = HostDetails(machine_id=\"client_1\", cpuinfo={\"bar\": \"baz\"})\nresult = Result(\n    server=server,\n    client=client,\n    server_details=server_details,\n    client_details=client_details,\n    file_size=10 ** 5,\n    complete_size=10 ** 8,\n    elapsed=400,\n)\nresult_id = results.add_result(result)\nprint(result_id)";
                var nbb_formatted_code = "# dont_test\n\nserver = BaseServer(name=\"server\", host=\"127.0.0.1\", port=8000)\nclient = BaseClient(name=\"fake client\")\nserver_details = HostDetails(machine_id=\"server_1\", cpuinfo={\"foo\": \"bar\"})\nclient_details = HostDetails(machine_id=\"client_1\", cpuinfo={\"bar\": \"baz\"})\nresult = Result(\n    server=server,\n    client=client,\n    server_details=server_details,\n    client_details=client_details,\n    file_size=10 ** 5,\n    complete_size=10 ** 8,\n    elapsed=400,\n)\nresult_id = results.add_result(result)\nprint(result_id)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">all_results</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">get_results</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">all_results</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>server=BaseServer(protocol=&#39;http&#39;, name=&#39;server&#39;, host=&#39;127.0.0.1&#39;, port=8000) client=BaseClient(name=&#39;fake client&#39;) server_details=HostDetails(machine_id=&#39;server_1&#39;, cpuinfo={&#39;foo&#39;: &#39;bar&#39;}) client_details=HostDetails(machine_id=&#39;client_1&#39;, cpuinfo={&#39;bar&#39;: &#39;baz&#39;}) file_size=100000 elapsed=400.0 complete_size=100000000
</pre>
</div>
</div>

<div class="output_area">




<div id="75d7ea3f-728d-4e3d-8b8d-5408f66baa16"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#75d7ea3f-728d-4e3d-8b8d-5408f66baa16');

            setTimeout(function() {
                var nbb_cell_id = 23;
                var nbb_unformatted_code = "# dont_test\n\nall_results = results.get_results()\nprint(all_results[0])";
                var nbb_formatted_code = "# dont_test\n\nall_results = results.get_results()\nprint(all_results[0])";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Test-ResultTable">Test ResultTable<a class="anchor-link" href="#Test-ResultTable"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">repository</span> <span class="o">=</span> <span class="n">SqliteRepository</span><span class="o">.</span><span class="n">build_repository</span><span class="p">(</span><span class="s2">&quot;:memory:&quot;</span><span class="p">)</span>
<span class="n">register_default_tables</span><span class="p">(</span><span class="n">repository</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="179b245a-0f93-410b-8015-e4fc32e16af0"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#179b245a-0f93-410b-8015-e4fc32e16af0');

            setTimeout(function() {
                var nbb_cell_id = 24;
                var nbb_unformatted_code = "repository = SqliteRepository.build_repository(\":memory:\")\nregister_default_tables(repository)";
                var nbb_formatted_code = "repository = SqliteRepository.build_repository(\":memory:\")\nregister_default_tables(repository)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Add-a-Complete-Result-to-Repository">Add a Complete Result to Repository<a class="anchor-link" href="#Add-a-Complete-Result-to-Repository"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">will_it_saturate.servers</span> <span class="kn">import</span> <span class="n">BaseServer</span>


<span class="n">server</span> <span class="o">=</span> <span class="n">BaseServer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;fake server&quot;</span><span class="p">)</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">BaseClient</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;fake client&quot;</span><span class="p">)</span>
<span class="n">server_details</span> <span class="o">=</span> <span class="n">HostDetails</span><span class="p">(</span><span class="n">machine_id</span><span class="o">=</span><span class="s2">&quot;server_1&quot;</span><span class="p">,</span> <span class="n">cpuinfo</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">})</span>
<span class="n">client_details</span> <span class="o">=</span> <span class="n">HostDetails</span><span class="p">(</span><span class="n">machine_id</span><span class="o">=</span><span class="s2">&quot;client_1&quot;</span><span class="p">,</span> <span class="n">cpuinfo</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;bar&quot;</span><span class="p">:</span> <span class="s2">&quot;baz&quot;</span><span class="p">})</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">Result</span><span class="p">(</span>
    <span class="n">server</span><span class="o">=</span><span class="n">server</span><span class="p">,</span>
    <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="o">.</span><span class="n">params</span><span class="p">(),</span>
    <span class="n">server_details</span><span class="o">=</span><span class="n">server_details</span><span class="p">,</span>
    <span class="n">client_details</span><span class="o">=</span><span class="n">client_details</span><span class="p">,</span>
    <span class="n">file_size</span><span class="o">=</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">complete_size</span><span class="o">=</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">8</span><span class="p">,</span>
    <span class="n">elapsed</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span>
<span class="n">result_id</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">add_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">result_id</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="63037a27-78e7-4432-ba68-c632714e93be"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#63037a27-78e7-4432-ba68-c632714e93be');

            setTimeout(function() {
                var nbb_cell_id = 25;
                var nbb_unformatted_code = "from will_it_saturate.servers import BaseServer\n\n\nserver = BaseServer(name=\"fake server\")\nclient = BaseClient(name=\"fake client\")\nserver_details = HostDetails(machine_id=\"server_1\", cpuinfo={\"foo\": \"bar\"})\nclient_details = HostDetails(machine_id=\"client_1\", cpuinfo={\"bar\": \"baz\"})\nresult = Result(\n    server=server,\n    client=client.params(),\n    server_details=server_details,\n    client_details=client_details,\n    file_size=10 ** 5,\n    complete_size=10 ** 8,\n    elapsed=400,\n)\nresults = repository.tables[\"result\"]\nresult_id = results.add_result(result)\nassert result_id == 1";
                var nbb_formatted_code = "from will_it_saturate.servers import BaseServer\n\n\nserver = BaseServer(name=\"fake server\")\nclient = BaseClient(name=\"fake client\")\nserver_details = HostDetails(machine_id=\"server_1\", cpuinfo={\"foo\": \"bar\"})\nclient_details = HostDetails(machine_id=\"client_1\", cpuinfo={\"bar\": \"baz\"})\nresult = Result(\n    server=server,\n    client=client.params(),\n    server_details=server_details,\n    client_details=client_details,\n    file_size=10 ** 5,\n    complete_size=10 ** 8,\n    elapsed=400,\n)\nresults = repository.tables[\"result\"]\nresult_id = results.add_result(result)\nassert result_id == 1";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Get-Results">Get Results<a class="anchor-link" href="#Get-Results"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result_from_db</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">get_results</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="n">result_from_db</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="38063e77-806d-4c70-9a71-0d42210afe1c"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#38063e77-806d-4c70-9a71-0d42210afe1c');

            setTimeout(function() {
                var nbb_cell_id = 26;
                var nbb_unformatted_code = "result_from_db = results.get_results()[0]\nassert result == result_from_db";
                var nbb_formatted_code = "result_from_db = results.get_results()[0]\nassert result == result_from_db";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbdev.export</span> <span class="kn">import</span> <span class="n">notebook2script</span>

<span class="n">notebook2script</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Converted 00_host.ipynb.
Converted 01_django_views.ipynb.
Converted 01_fastapi_views.ipynb.
Converted 01_file.ipynb.
Converted 05_epochs.ipynb.
Converted 06_results.ipynb.
Converted 25_core.ipynb.
Converted 27_control_server.ipynb.
Converted 28_control_client.ipynb.
Converted 29_control_cli.ipynb.
Converted 30_servers.ipynb.
Converted 31_local_servers.ipynb.
Converted 32_docker_servers.ipynb.
Converted 40_clients.ipynb.
Converted 41_benchmark_clients.ipynb.
Converted 70_repositories.ipynb.
Converted 71_sqlite_repository.ipynb.
Converted 90_benchmark_without_benchmark.ipynb.
Converted 98_run_benchmark.ipynb.
Converted index.ipynb.
</pre>
</div>
</div>

<div class="output_area">




<div id="a8990435-ebc0-462d-9aea-d65940c5fb13"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#a8990435-ebc0-462d-9aea-d65940c5fb13');

            setTimeout(function() {
                var nbb_cell_id = 29;
                var nbb_unformatted_code = "# dont_test\n\nfrom nbdev.export import notebook2script\n\nnotebook2script()";
                var nbb_formatted_code = "# dont_test\n\nfrom nbdev.export import notebook2script\n\nnotebook2script()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

