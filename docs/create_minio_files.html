---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "55_create_minio_files.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 55_create_minio_files.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> nb_black
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="8324d0a2-6aac-4dbd-b5b3-be0605a8fffa"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#8324d0a2-6aac-4dbd-b5b3-be0605a8fffa');

            setTimeout(function() {
                var nbb_cell_id = 1;
                var nbb_unformatted_code = "%load_ext nb_black";
                var nbb_formatted_code = "%load_ext nb_black";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">io</span>

<span class="kn">import</span> <span class="nn">aiobotocore</span>

<span class="kn">from</span> <span class="nn">minio</span> <span class="kn">import</span> <span class="n">Minio</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="24db52a1-dc54-45f5-95d4-cef514caa090"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#24db52a1-dc54-45f5-95d4-cef514caa090');

            setTimeout(function() {
                var nbb_cell_id = 8;
                var nbb_unformatted_code = "# dont_test\n\nimport os\nimport io\n\nimport aiobotocore\n\nfrom minio import Minio";
                var nbb_formatted_code = "# dont_test\n\nimport os\nimport io\n\nimport aiobotocore\n\nfrom minio import Minio";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="n">Minio</span><span class="p">(</span><span class="s2">&quot;127.0.0.1:9000&quot;</span><span class="p">,</span> <span class="s2">&quot;minioadmin&quot;</span><span class="p">,</span> <span class="s2">&quot;minioadmin&quot;</span><span class="p">,</span> <span class="n">secure</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="9a837839-1e64-4d28-b087-97ce9ffd1577"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#9a837839-1e64-4d28-b087-97ce9ffd1577');

            setTimeout(function() {
                var nbb_cell_id = 3;
                var nbb_unformatted_code = "client = Minio(\"127.0.0.1:9000\", \"minioadmin\", \"minioadmin\", secure=False)";
                var nbb_formatted_code = "client = Minio(\"127.0.0.1:9000\", \"minioadmin\", \"minioadmin\", secure=False)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bucket_name</span> <span class="o">=</span> <span class="s2">&quot;wis&quot;</span>
<span class="n">found</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">bucket_exists</span><span class="p">(</span><span class="n">bucket_name</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
    <span class="n">client</span><span class="o">.</span><span class="n">make_bucket</span><span class="p">(</span><span class="n">bucket_name</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Bucket &#39;</span><span class="si">{</span><span class="n">bucket_name</span><span class="si">}</span><span class="s2">&#39; already exists&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Bucket &#39;wis&#39; already exists
</pre>
</div>
</div>

<div class="output_area">




<div id="e6e26702-29ef-4c6c-adb6-c341dee475ab"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#e6e26702-29ef-4c6c-adb6-c341dee475ab');

            setTimeout(function() {
                var nbb_cell_id = 4;
                var nbb_unformatted_code = "bucket_name = \"wis\"\nfound = client.bucket_exists(bucket_name)\nif not found:\n    client.make_bucket(bucket_name)\nelse:\n    print(f\"Bucket '{bucket_name}' already exists\")";
                var nbb_formatted_code = "bucket_name = \"wis\"\nfound = client.bucket_exists(bucket_name)\nif not found:\n    client.make_bucket(bucket_name)\nelse:\n    print(f\"Bucket '{bucket_name}' already exists\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;foo/bar/baz&quot;</span>
<span class="n">size</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="mi">7</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">urandom</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">put_object</span><span class="p">(</span>
    <span class="n">bucket_name</span><span class="p">,</span>
    <span class="n">path</span><span class="p">,</span>
    <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
    <span class="n">size</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;created </span><span class="si">{0}</span><span class="s2"> object; etag: </span><span class="si">{1}</span><span class="s2">, version-id: </span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">result</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span>
        <span class="n">result</span><span class="o">.</span><span class="n">etag</span><span class="p">,</span>
        <span class="n">result</span><span class="o">.</span><span class="n">version_id</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>created foo/bar/baz object; etag: 2964cf8c8fcbbe7f1732f754280d7d4a-2, version-id: None
</pre>
</div>
</div>

<div class="output_area">




<div id="ce10ee6c-3282-4d61-a6ad-1ecc7d844ea2"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#ce10ee6c-3282-4d61-a6ad-1ecc7d844ea2');

            setTimeout(function() {
                var nbb_cell_id = 6;
                var nbb_unformatted_code = "path = \"foo/bar/baz\"\nsize = 10 ** 7\ndata = os.urandom(size)\nresult = client.put_object(\n    bucket_name, path, io.BytesIO(data), size,\n)\nprint(\n    \"created {0} object; etag: {1}, version-id: {2}\".format(\n        result.object_name, result.etag, result.version_id,\n    ),\n)";
                var nbb_formatted_code = "path = \"foo/bar/baz\"\nsize = 10 ** 7\ndata = os.urandom(size)\nresult = client.put_object(\n    bucket_name,\n    path,\n    io.BytesIO(data),\n    size,\n)\nprint(\n    \"created {0} object; etag: {1}, version-id: {2}\".format(\n        result.object_name,\n        result.etag,\n        result.version_id,\n    ),\n)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">AWS_ACCESS_KEY_ID</span> <span class="o">=</span> <span class="s2">&quot;minioadmin&quot;</span>
<span class="n">AWS_SECRET_ACCESS_KEY</span> <span class="o">=</span> <span class="s2">&quot;minioadmin&quot;</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="s2">&quot;wis&quot;</span>
<span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;data/3000000_2_12500000/0&quot;</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">aiobotocore</span><span class="o">.</span><span class="n">get_session</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="0b68de61-39a8-41aa-bfda-eba57883d063"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#0b68de61-39a8-41aa-bfda-eba57883d063');

            setTimeout(function() {
                var nbb_cell_id = 10;
                var nbb_unformatted_code = "# dont_test\n\nAWS_ACCESS_KEY_ID = \"minioadmin\"\nAWS_SECRET_ACCESS_KEY = \"minioadmin\"\n\nbucket = \"wis\"\nkey = \"data/3000000_2_12500000/0\"\n\nsession = aiobotocore.get_session()";
                var nbb_formatted_code = "# dont_test\n\nAWS_ACCESS_KEY_ID = \"minioadmin\"\nAWS_SECRET_ACCESS_KEY = \"minioadmin\"\n\nbucket = \"wis\"\nkey = \"data/3000000_2_12500000/0\"\n\nsession = aiobotocore.get_session()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">create_client</span><span class="p">(</span>
    <span class="s2">&quot;s3&quot;</span><span class="p">,</span>
    <span class="n">endpoint_url</span><span class="o">=</span><span class="s2">&quot;http://localhost:9000&quot;</span><span class="p">,</span>
    <span class="n">region_name</span><span class="o">=</span><span class="s2">&quot;us-west-2&quot;</span><span class="p">,</span>
    <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">AWS_SECRET_ACCESS_KEY</span><span class="p">,</span>
    <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">AWS_ACCESS_KEY_ID</span><span class="p">,</span>
<span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="n">Bucket</span><span class="o">=</span><span class="n">bucket</span><span class="p">,</span> <span class="n">Key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;Body&quot;</span><span class="p">]</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="b1cf5a32-a9ba-456b-9983-24706f449c01"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#b1cf5a32-a9ba-456b-9983-24706f449c01');

            setTimeout(function() {
                var nbb_cell_id = 25;
                var nbb_unformatted_code = "# dont_test\n\nasync with session.create_client(\n    \"s3\",\n    endpoint_url=\"http://localhost:9000\",\n    region_name=\"us-west-2\",\n    aws_secret_access_key=AWS_SECRET_ACCESS_KEY,\n    aws_access_key_id=AWS_ACCESS_KEY_ID,\n) as client:\n    response = await client.get_object(Bucket=bucket, Key=key)\n    async with response[\"Body\"] as stream:\n        data = await stream.read()";
                var nbb_formatted_code = "# dont_test\n\nasync with session.create_client(\n    \"s3\",\n    endpoint_url=\"http://localhost:9000\",\n    region_name=\"us-west-2\",\n    aws_secret_access_key=AWS_SECRET_ACCESS_KEY,\n    aws_access_key_id=AWS_ACCESS_KEY_ID,\n) as client:\n    response = await client.get_object(Bucket=bucket, Key=key)\n    async with response[\"Body\"] as stream:\n        data = await stream.read()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">will_it_saturate.files</span> <span class="kn">import</span> <span class="n">calculate_checksum</span>
<span class="n">calculate_checksum</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="eea6786c-8e0f-45c8-a96a-c4d84214d911"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#eea6786c-8e0f-45c8-a96a-c4d84214d911');

            setTimeout(function() {
                var nbb_cell_id = 23;
                var nbb_unformatted_code = "from will_it_saturate.files import calculate_checksum";
                var nbb_formatted_code = "from will_it_saturate.files import calculate_checksum";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

