---

title: Control Server


keywords: fastai
sidebar: home_sidebar



nb_path: "30_control_server.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 30_control_server.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> nb_black
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="c18a022a-094a-4636-874a-3dd21f8285a4" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#c18a022a-094a-4636-874a-3dd21f8285a4');

            setTimeout(function() {
                var nbb_cell_id = 1;
                var nbb_unformatted_code = "%load_ext nb_black";
                var nbb_formatted_code = "%load_ext nb_black";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">httpx</span>

<span class="kn">from</span> <span class="nn">will_it_saturate.epochs</span> <span class="kn">import</span> <span class="n">Epoch</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="0aa32c16-3e24-4206-8c7a-5fb68ba19865" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#0aa32c16-3e24-4206-8c7a-5fb68ba19865');

            setTimeout(function() {
                var nbb_cell_id = 2;
                var nbb_unformatted_code = "import httpx\n\nfrom will_it_saturate.epochs import Epoch";
                var nbb_formatted_code = "import httpx\n\nfrom will_it_saturate.epochs import Epoch";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_root" class="doc_header"><code>read_root</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/control/main.py#L30" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_root</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="create_epoch" class="doc_header"><code>create_epoch</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/control/main.py#L35" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>create_epoch</code>(<strong><code>epoch</code></strong>:<a href="/will_it_saturate/epochs.html#Epoch"><code>Epoch</code></a>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="create_server" class="doc_header"><code>create_server</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/control/main.py#L42" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>create_server</code>(<strong><code>server_params</code></strong>:<a href="/will_it_saturate/registry.html#ModelParameters"><code>ModelParameters</code></a>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="list_servers" class="doc_header"><code>list_servers</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/control/main.py#L54" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>list_servers</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="stop_server" class="doc_header"><code>stop_server</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/control/main.py#L59" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>stop_server</code>(<strong><code>server_params</code></strong>:<a href="/will_it_saturate/registry.html#ModelParameters"><code>ModelParameters</code></a>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="host_details" class="doc_header"><code>host_details</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/control/main.py#L74" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>host_details</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="measure" class="doc_header"><code>measure</code><a href="https://github.com/ephes/will_it_saturate/tree/main/will_it_saturate/control/main.py#L80" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>measure</code>(<strong><code>client_params</code></strong>:<a href="/will_it_saturate/registry.html#ModelParameters"><code>ModelParameters</code></a>, <strong><code>epoch</code></strong>:<a href="/will_it_saturate/epochs.html#Epoch"><code>Epoch</code></a>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Usage">Usage<a class="anchor-link" href="#Usage"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">byte</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">gigabit</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">9</span>
<span class="n">bandwidth</span> <span class="o">=</span> <span class="n">gigabit</span> <span class="o">/</span> <span class="n">byte</span>
<span class="n">duration</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">file_size</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">7</span>

<span class="n">epoch</span> <span class="o">=</span> <span class="n">Epoch</span><span class="p">(</span>
    <span class="n">file_size</span><span class="o">=</span><span class="n">file_size</span><span class="p">,</span>
    <span class="n">duration</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">bandwith</span><span class="o">=</span><span class="n">bandwidth</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="17c0e8f9-c48b-4ad7-8ae9-9cdc27415e0b" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#17c0e8f9-c48b-4ad7-8ae9-9cdc27415e0b');

            setTimeout(function() {
                var nbb_cell_id = 6;
                var nbb_unformatted_code = "byte = 8\ngigabit = 10 ** 9\nbandwidth = gigabit / byte\nduration = 3\nfile_size = 10 ** 7\n\nepoch = Epoch(\n    file_size=file_size,\n    duration=3,\n    bandwith=bandwidth,\n)";
                var nbb_formatted_code = "byte = 8\ngigabit = 10**9\nbandwidth = gigabit / byte\nduration = 3\nfile_size = 10**7\n\nepoch = Epoch(\n    file_size=file_size,\n    duration=3,\n    bandwith=bandwidth,\n)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://localhost:8001/epochs/&quot;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">httpx</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">epoch</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ConnectError</span>                              Traceback (most recent call last)
File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpx-1.0.0b0-py3.10.egg/httpx/_transports/default.py:62</span>, in <span class="ansi-cyan-fg">map_httpcore_exceptions</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">     61</span> <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">---&gt; 62</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">yield</span>
<span class="ansi-green-intense-fg ansi-bold">     63</span> <span class="ansi-bold" style="color: rgb(0,135,0)">except</span> <span class="ansi-bold" style="color: rgb(215,95,95)">Exception</span> <span class="ansi-bold" style="color: rgb(0,135,0)">as</span> exc:

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpx-1.0.0b0-py3.10.egg/httpx/_transports/default.py:177</span>, in <span class="ansi-cyan-fg">HTTPTransport.handle_request</span><span class="ansi-blue-fg">(self, request)</span>
<span class="ansi-green-intense-fg ansi-bold">    176</span> <span class="ansi-bold" style="color: rgb(0,135,0)">with</span> map_httpcore_exceptions():
<span class="ansi-green-fg">--&gt; 177</span>     status_code, headers, byte_stream, extensions <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">_pool</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">handle_request</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-intense-fg ansi-bold">    178</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">method</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">request</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">method</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">encode</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#34;</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">ascii</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#34;</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    179</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">url</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">request</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">url</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">raw</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    180</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">headers</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">request</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">headers</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">raw</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    181</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">stream</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">httpcore</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">IteratorByteStream</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">iter</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">request</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">stream</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    182</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">extensions</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">request</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">extensions</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    183</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    185</span> stream <span style="color: rgb(98,98,98)">=</span> ResponseStream(byte_stream)

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpcore-0.13.7-py3.10.egg/httpcore/_sync/connection_pool.py:234</span>, in <span class="ansi-cyan-fg">SyncConnectionPool.handle_request</span><span class="ansi-blue-fg">(self, method, url, headers, stream, extensions)</span>
<span class="ansi-green-intense-fg ansi-bold">    233</span> <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">--&gt; 234</span>     response <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">connection</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">handle_request</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-intense-fg ansi-bold">    235</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">method</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">url</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">headers</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">headers</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">stream</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">stream</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">extensions</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">extensions</span>
<span class="ansi-green-intense-fg ansi-bold">    236</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    237</span> <span class="ansi-bold" style="color: rgb(0,135,0)">except</span> NewConnectionRequired:

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpcore-0.13.7-py3.10.egg/httpcore/_sync/connection.py:136</span>, in <span class="ansi-cyan-fg">SyncHTTPConnection.handle_request</span><span class="ansi-blue-fg">(self, method, url, headers, stream, extensions)</span>
<span class="ansi-green-intense-fg ansi-bold">    133</span>     logger<span style="color: rgb(98,98,98)">.</span>trace(
<span class="ansi-green-intense-fg ansi-bold">    134</span>         <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">open_socket origin=</span><span class="ansi-bold" style="color: rgb(175,95,135)">%r</span><span style="color: rgb(175,0,0)"> timeout=</span><span class="ansi-bold" style="color: rgb(175,95,135)">%r</span><span style="color: rgb(175,0,0)">&#34;</span>, <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>origin, timeout
<span class="ansi-green-intense-fg ansi-bold">    135</span>     )
<span class="ansi-green-fg">--&gt; 136</span>     <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>socket <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">_open_socket</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">timeout</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    137</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_create_connection(<span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>socket)

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpcore-0.13.7-py3.10.egg/httpcore/_sync/connection.py:163</span>, in <span class="ansi-cyan-fg">SyncHTTPConnection._open_socket</span><span class="ansi-blue-fg">(self, timeout)</span>
<span class="ansi-green-intense-fg ansi-bold">    162</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_uds <span class="ansi-bold" style="color: rgb(175,0,255)">is</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">--&gt; 163</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">_backend</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">open_tcp_stream</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-intense-fg ansi-bold">    164</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">hostname</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    165</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">port</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    166</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">ssl_context</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    167</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">timeout</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    168</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">local_address</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">_local_address</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    169</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    170</span> <span class="ansi-bold" style="color: rgb(0,135,0)">else</span>:

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpcore-0.13.7-py3.10.egg/httpcore/_backends/sync.py:136</span>, in <span class="ansi-cyan-fg">SyncBackend.open_tcp_stream</span><span class="ansi-blue-fg">(self, hostname, port, ssl_context, timeout, local_address)</span>
<span class="ansi-green-intense-fg ansi-bold">    134</span> exc_map <span style="color: rgb(98,98,98)">=</span> {socket<span style="color: rgb(98,98,98)">.</span>timeout: ConnectTimeout, socket<span style="color: rgb(98,98,98)">.</span>error: ConnectError}
<span class="ansi-green-fg">--&gt; 136</span> <span class="ansi-bold" style="color: rgb(0,135,0)">with</span> map_exceptions(exc_map):
<span class="ansi-green-intense-fg ansi-bold">    137</span>     sock <span style="color: rgb(98,98,98)">=</span> socket<span style="color: rgb(98,98,98)">.</span>create_connection(
<span class="ansi-green-intense-fg ansi-bold">    138</span>         address, connect_timeout, source_address<span style="color: rgb(98,98,98)">=</span>source_address  <span style="color: rgb(95,135,135)"># type: ignore</span>
<span class="ansi-green-intense-fg ansi-bold">    139</span>     )

File <span class="ansi-green-fg">~/.pyenv/versions/3.10.2/lib/python3.10/contextlib.py:153</span>, in <span class="ansi-cyan-fg">_GeneratorContextManager.__exit__</span><span class="ansi-blue-fg">(self, typ, value, traceback)</span>
<span class="ansi-green-intense-fg ansi-bold">    152</span> <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">--&gt; 153</span>     <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">gen</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">throw</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">typ</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">value</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">traceback</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    154</span> <span class="ansi-bold" style="color: rgb(0,135,0)">except</span> <span class="ansi-bold" style="color: rgb(215,95,95)">StopIteration</span> <span class="ansi-bold" style="color: rgb(0,135,0)">as</span> exc:
<span class="ansi-green-intense-fg ansi-bold">    155</span>     <span style="color: rgb(95,135,135)"># Suppress StopIteration *unless* it&#39;s the same exception that</span>
<span class="ansi-green-intense-fg ansi-bold">    156</span>     <span style="color: rgb(95,135,135)"># was passed to throw().  This prevents a StopIteration</span>
<span class="ansi-green-intense-fg ansi-bold">    157</span>     <span style="color: rgb(95,135,135)"># raised inside the &#34;with&#34; statement from being suppressed.</span>

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpcore-0.13.7-py3.10.egg/httpcore/_exceptions.py:12</span>, in <span class="ansi-cyan-fg">map_exceptions</span><span class="ansi-blue-fg">(map)</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">isinstance</span>(exc, from_exc):
<span class="ansi-green-fg">---&gt; 12</span>         <span class="ansi-bold" style="color: rgb(0,135,0)">raise</span> to_exc(exc) <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span style="color: rgb(0,135,0)">None</span>
<span class="ansi-green-intense-fg ansi-bold">     13</span> <span class="ansi-bold" style="color: rgb(0,135,0)">raise</span>

<span class="ansi-red-fg">ConnectError</span>: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

<span class="ansi-red-fg">ConnectError</span>                              Traceback (most recent call last)
Input <span class="ansi-green-fg">In [7]</span>, in <span class="ansi-cyan-fg">&lt;cell line: 4&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span style="color: rgb(95,135,135)"># dont_test</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> url <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">http://localhost:8001/epochs/</span><span style="color: rgb(175,0,0)">&#34;</span>
<span class="ansi-green-fg">----&gt; 4</span> r <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">httpx</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">post</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">url</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">json</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">epoch</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">dict</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> <span style="color: rgb(0,135,0)">print</span>(r<span style="color: rgb(98,98,98)">.</span>status_code, r<span style="color: rgb(98,98,98)">.</span>json())

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpx-1.0.0b0-py3.10.egg/httpx/_api.py:304</span>, in <span class="ansi-cyan-fg">post</span><span class="ansi-blue-fg">(url, content, data, files, json, params, headers, cookies, auth, proxies, follow_redirects, cert, verify, timeout, trust_env)</span>
<span class="ansi-green-intense-fg ansi-bold">    281</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span> <span style="color: rgb(0,0,255)">post</span>(
<span class="ansi-green-intense-fg ansi-bold">    282</span>     url: URLTypes,
<span class="ansi-green-intense-fg ansi-bold">    283</span>     <span style="color: rgb(98,98,98)">*</span>,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">    297</span>     trust_env: <span style="color: rgb(0,135,0)">bool</span> <span style="color: rgb(98,98,98)">=</span> <span class="ansi-bold" style="color: rgb(0,135,0)">True</span>,
<span class="ansi-green-intense-fg ansi-bold">    298</span> ) <span style="color: rgb(98,98,98)">-</span><span style="color: rgb(98,98,98)">&gt;</span> Response:
<span class="ansi-green-intense-fg ansi-bold">    299</span>     <span style="color: rgb(175,0,0)">&#34;&#34;&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">    300</span> <span style="color: rgb(175,0,0)">    Sends a `POST` request.</span>
<span class="ansi-green-intense-fg ansi-bold">    301</span> 
<span class="ansi-green-intense-fg ansi-bold">    302</span> <span style="color: rgb(175,0,0)">    **Parameters**: See `httpx.request`.</span>
<span class="ansi-green-intense-fg ansi-bold">    303</span> <span style="color: rgb(175,0,0)">    &#34;&#34;&#34;</span>
<span class="ansi-green-fg">--&gt; 304</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">request</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-intense-fg ansi-bold">    305</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#34;</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">POST</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#34;</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    306</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">url</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    307</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">content</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">content</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    308</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    309</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">files</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">files</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    310</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">json</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">json</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    311</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">params</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">params</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    312</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">headers</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">headers</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    313</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">cookies</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">cookies</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    314</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">auth</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">auth</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    315</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">proxies</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">proxies</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    316</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">follow_redirects</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">follow_redirects</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    317</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">cert</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">cert</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    318</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">verify</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">verify</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    319</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">timeout</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">timeout</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    320</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">trust_env</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">trust_env</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    321</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpx-1.0.0b0-py3.10.egg/httpx/_api.py:100</span>, in <span class="ansi-cyan-fg">request</span><span class="ansi-blue-fg">(method, url, params, content, data, files, json, headers, cookies, auth, proxies, timeout, follow_redirects, verify, cert, trust_env)</span>
<span class="ansi-green-intense-fg ansi-bold">     42</span> <span style="color: rgb(175,0,0)">&#34;&#34;&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">     43</span> <span style="color: rgb(175,0,0)">Sends an HTTP request.</span>
<span class="ansi-green-intense-fg ansi-bold">     44</span> 
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">     90</span> <span style="color: rgb(175,0,0)">```</span>
<span class="ansi-green-intense-fg ansi-bold">     91</span> <span style="color: rgb(175,0,0)">&#34;&#34;&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">     92</span> <span class="ansi-bold" style="color: rgb(0,135,0)">with</span> Client(
<span class="ansi-green-intense-fg ansi-bold">     93</span>     cookies<span style="color: rgb(98,98,98)">=</span>cookies,
<span class="ansi-green-intense-fg ansi-bold">     94</span>     proxies<span style="color: rgb(98,98,98)">=</span>proxies,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">     98</span>     trust_env<span style="color: rgb(98,98,98)">=</span>trust_env,
<span class="ansi-green-intense-fg ansi-bold">     99</span> ) <span class="ansi-bold" style="color: rgb(0,135,0)">as</span> client:
<span class="ansi-green-fg">--&gt; 100</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">client</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">request</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-intense-fg ansi-bold">    101</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">method</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">method</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    102</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">url</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">url</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    103</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">content</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">content</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    104</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    105</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">files</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">files</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    106</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">json</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">json</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    107</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">params</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">params</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    108</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">headers</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">headers</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    109</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">auth</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">auth</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    110</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">follow_redirects</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">follow_redirects</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    111</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpx-1.0.0b0-py3.10.egg/httpx/_client.py:792</span>, in <span class="ansi-cyan-fg">Client.request</span><span class="ansi-blue-fg">(self, method, url, content, data, files, json, params, headers, cookies, auth, follow_redirects, timeout)</span>
<span class="ansi-green-intense-fg ansi-bold">    778</span>     warnings<span style="color: rgb(98,98,98)">.</span>warn(message, <span class="ansi-bold" style="color: rgb(215,95,95)">DeprecationWarning</span>)
<span class="ansi-green-intense-fg ansi-bold">    780</span> request <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>build_request(
<span class="ansi-green-intense-fg ansi-bold">    781</span>     method<span style="color: rgb(98,98,98)">=</span>method,
<span class="ansi-green-intense-fg ansi-bold">    782</span>     url<span style="color: rgb(98,98,98)">=</span>url,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">    790</span>     timeout<span style="color: rgb(98,98,98)">=</span>timeout,
<span class="ansi-green-intense-fg ansi-bold">    791</span> )
<span class="ansi-green-fg">--&gt; 792</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">send</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">request</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">auth</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">auth</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">follow_redirects</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">follow_redirects</span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpx-1.0.0b0-py3.10.egg/httpx/_client.py:877</span>, in <span class="ansi-cyan-fg">Client.send</span><span class="ansi-blue-fg">(self, request, stream, auth, follow_redirects)</span>
<span class="ansi-green-intense-fg ansi-bold">    869</span> follow_redirects <span style="color: rgb(98,98,98)">=</span> (
<span class="ansi-green-intense-fg ansi-bold">    870</span>     <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>follow_redirects
<span class="ansi-green-intense-fg ansi-bold">    871</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">isinstance</span>(follow_redirects, UseClientDefault)
<span class="ansi-green-intense-fg ansi-bold">    872</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">else</span> follow_redirects
<span class="ansi-green-intense-fg ansi-bold">    873</span> )
<span class="ansi-green-intense-fg ansi-bold">    875</span> auth <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_build_request_auth(request, auth)
<span class="ansi-green-fg">--&gt; 877</span> response <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">_send_handling_auth</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-intense-fg ansi-bold">    878</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">request</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    879</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">auth</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">auth</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    880</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">follow_redirects</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">follow_redirects</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    881</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">history</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">]</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    882</span> <span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    883</span> <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:
<span class="ansi-green-intense-fg ansi-bold">    884</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span class="ansi-bold" style="color: rgb(175,0,255)">not</span> stream:

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpx-1.0.0b0-py3.10.egg/httpx/_client.py:905</span>, in <span class="ansi-cyan-fg">Client._send_handling_auth</span><span class="ansi-blue-fg">(self, request, auth, follow_redirects, history)</span>
<span class="ansi-green-intense-fg ansi-bold">    902</span> request <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">next</span>(auth_flow)
<span class="ansi-green-intense-fg ansi-bold">    904</span> <span class="ansi-bold" style="color: rgb(0,135,0)">while</span> <span class="ansi-bold" style="color: rgb(0,135,0)">True</span>:
<span class="ansi-green-fg">--&gt; 905</span>     response <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">_send_handling_redirects</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-intense-fg ansi-bold">    906</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">request</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    907</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">follow_redirects</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">follow_redirects</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    908</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">history</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">history</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    909</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    910</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:
<span class="ansi-green-intense-fg ansi-bold">    911</span>         <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpx-1.0.0b0-py3.10.egg/httpx/_client.py:942</span>, in <span class="ansi-cyan-fg">Client._send_handling_redirects</span><span class="ansi-blue-fg">(self, request, follow_redirects, history)</span>
<span class="ansi-green-intense-fg ansi-bold">    939</span> <span class="ansi-bold" style="color: rgb(0,135,0)">for</span> hook <span class="ansi-bold" style="color: rgb(175,0,255)">in</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_event_hooks[<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">request</span><span style="color: rgb(175,0,0)">&#34;</span>]:
<span class="ansi-green-intense-fg ansi-bold">    940</span>     hook(request)
<span class="ansi-green-fg">--&gt; 942</span> response <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">_send_single_request</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">request</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    943</span> <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:
<span class="ansi-green-intense-fg ansi-bold">    944</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">for</span> hook <span class="ansi-bold" style="color: rgb(175,0,255)">in</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_event_hooks[<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">response</span><span style="color: rgb(175,0,0)">&#34;</span>]:

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpx-1.0.0b0-py3.10.egg/httpx/_client.py:978</span>, in <span class="ansi-cyan-fg">Client._send_single_request</span><span class="ansi-blue-fg">(self, request)</span>
<span class="ansi-green-intense-fg ansi-bold">    973</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">raise</span> <span class="ansi-bold" style="color: rgb(215,95,95)">RuntimeError</span>(
<span class="ansi-green-intense-fg ansi-bold">    974</span>         <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">Attempted to send an async request with a sync Client instance.</span><span style="color: rgb(175,0,0)">&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">    975</span>     )
<span class="ansi-green-intense-fg ansi-bold">    977</span> <span class="ansi-bold" style="color: rgb(0,135,0)">with</span> request_context(request<span style="color: rgb(98,98,98)">=</span>request):
<span class="ansi-green-fg">--&gt; 978</span>     response <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">transport</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">handle_request</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">request</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    980</span> <span class="ansi-bold" style="color: rgb(0,135,0)">assert</span> <span style="color: rgb(0,135,0)">isinstance</span>(response<span style="color: rgb(98,98,98)">.</span>stream, SyncByteStream)
<span class="ansi-green-intense-fg ansi-bold">    982</span> response<span style="color: rgb(98,98,98)">.</span>request <span style="color: rgb(98,98,98)">=</span> request

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpx-1.0.0b0-py3.10.egg/httpx/_transports/default.py:176</span>, in <span class="ansi-cyan-fg">HTTPTransport.handle_request</span><span class="ansi-blue-fg">(self, request)</span>
<span class="ansi-green-intense-fg ansi-bold">    170</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span> <span style="color: rgb(0,0,255)">handle_request</span>(
<span class="ansi-green-intense-fg ansi-bold">    171</span>     <span style="color: rgb(0,135,0)">self</span>,
<span class="ansi-green-intense-fg ansi-bold">    172</span>     request: Request,
<span class="ansi-green-intense-fg ansi-bold">    173</span> ) <span style="color: rgb(98,98,98)">-</span><span style="color: rgb(98,98,98)">&gt;</span> Response:
<span class="ansi-green-intense-fg ansi-bold">    174</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">assert</span> <span style="color: rgb(0,135,0)">isinstance</span>(request<span style="color: rgb(98,98,98)">.</span>stream, SyncByteStream)
<span class="ansi-green-fg">--&gt; 176</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">with</span> map_httpcore_exceptions():
<span class="ansi-green-intense-fg ansi-bold">    177</span>         status_code, headers, byte_stream, extensions <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_pool<span style="color: rgb(98,98,98)">.</span>handle_request(
<span class="ansi-green-intense-fg ansi-bold">    178</span>             method<span style="color: rgb(98,98,98)">=</span>request<span style="color: rgb(98,98,98)">.</span>method<span style="color: rgb(98,98,98)">.</span>encode(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">ascii</span><span style="color: rgb(175,0,0)">&#34;</span>),
<span class="ansi-green-intense-fg ansi-bold">    179</span>             url<span style="color: rgb(98,98,98)">=</span>request<span style="color: rgb(98,98,98)">.</span>url<span style="color: rgb(98,98,98)">.</span>raw,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">    182</span>             extensions<span style="color: rgb(98,98,98)">=</span>request<span style="color: rgb(98,98,98)">.</span>extensions,
<span class="ansi-green-intense-fg ansi-bold">    183</span>         )
<span class="ansi-green-intense-fg ansi-bold">    185</span>     stream <span style="color: rgb(98,98,98)">=</span> ResponseStream(byte_stream)

File <span class="ansi-green-fg">~/.pyenv/versions/3.10.2/lib/python3.10/contextlib.py:153</span>, in <span class="ansi-cyan-fg">_GeneratorContextManager.__exit__</span><span class="ansi-blue-fg">(self, typ, value, traceback)</span>
<span class="ansi-green-intense-fg ansi-bold">    151</span>     value <span style="color: rgb(98,98,98)">=</span> typ()
<span class="ansi-green-intense-fg ansi-bold">    152</span> <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">--&gt; 153</span>     <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">gen</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">throw</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">typ</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">value</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">traceback</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    154</span> <span class="ansi-bold" style="color: rgb(0,135,0)">except</span> <span class="ansi-bold" style="color: rgb(215,95,95)">StopIteration</span> <span class="ansi-bold" style="color: rgb(0,135,0)">as</span> exc:
<span class="ansi-green-intense-fg ansi-bold">    155</span>     <span style="color: rgb(95,135,135)"># Suppress StopIteration *unless* it&#39;s the same exception that</span>
<span class="ansi-green-intense-fg ansi-bold">    156</span>     <span style="color: rgb(95,135,135)"># was passed to throw().  This prevents a StopIteration</span>
<span class="ansi-green-intense-fg ansi-bold">    157</span>     <span style="color: rgb(95,135,135)"># raised inside the &#34;with&#34; statement from being suppressed.</span>
<span class="ansi-green-intense-fg ansi-bold">    158</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> exc <span class="ansi-bold" style="color: rgb(175,0,255)">is</span> <span class="ansi-bold" style="color: rgb(175,0,255)">not</span> value

File <span class="ansi-green-fg">~/.virtualenvs/wis/lib/python3.10/site-packages/httpx-1.0.0b0-py3.10.egg/httpx/_transports/default.py:79</span>, in <span class="ansi-cyan-fg">map_httpcore_exceptions</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">     76</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">raise</span>
<span class="ansi-green-intense-fg ansi-bold">     78</span> message <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">str</span>(exc)
<span class="ansi-green-fg">---&gt; 79</span> <span class="ansi-bold" style="color: rgb(0,135,0)">raise</span> mapped_exc(message) <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">exc</span>

<span class="ansi-red-fg">ConnectError</span>: [Errno 61] Connection refused</pre>
</div>
</div>

<div class="output_area">




<div id="deb1f1c9-61ca-46e2-bbf3-956516b5ca05" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#deb1f1c9-61ca-46e2-bbf3-956516b5ca05');

            setTimeout(function() {
                var nbb_cell_id = 7;
                var nbb_unformatted_code = "# dont_test\nurl = \"http://localhost:8001/epochs/\"\n\nr = httpx.post(url, json=epoch.dict())\nprint(r.status_code, r.json())";
                var nbb_formatted_code = "# dont_test\nurl = \"http://localhost:8001/epochs/\"\n\nr = httpx.post(url, json=epoch.dict())\nprint(r.status_code, r.json())";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

